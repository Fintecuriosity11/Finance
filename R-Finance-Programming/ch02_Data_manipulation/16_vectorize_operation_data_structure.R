##########################################################################################################################################

#(주의) ->  순차적으로 코드를 실행하는 것을 권함!

#에러 발생 시 github Finance/R-Finance-Programming 경로에 issue를 남기면 확인

##########################################################################################################################################

### 벡터화(vectorization)

# 벡터화 =  간단한 코딩 + 빠른 속도.

# 어떤 함수 f(x)가 있는데 그 입력변수인 x는 숫자(scalar)이다.
# 만약에 x의 여러가지 값에 대해서 함수를 적용해야 한다면 일반적으로는 for와 같은 반복문을 사용.
# 벡터 개념을 이용하면 벡터를 입력하고 벡터를 출력함으로써 보다 간단한 코드 작성.

# 벡터화는 벡터 원소 각각에 대해 연산을 하는 것이 아니라, 벡터 전체에 대해 한꺼번에 연산을 하는 것을 의미
# 원소별로 연산을 하는 것보다 벡터화 시키면 편하고 빠름.


##########################################################################################################################################



##########################################################################################################################################

### 벡터화 팁.

# 일반적인 함수의 경우 apply() 함수를 적용하지 않아도 벡터화 연산을 지원함.

f<- function(x,y) x+2*y
a<-1:3
b<-10                     # 입력변수 중에 첫번째 인수가 벡터이므로 결과도 벡터로 출력. 벡터화 연산 수행.
f(a,b)

# 만약에 입력인수가 여럿이고 그 벡터의 차원(dimension)이 일치하지 않는다면 벡터의 재활용 원칙이 적용.



############################################################결과값(print)#################################################################

# [Workspace loaded from ~/.RData]

# > f<- function(x,y) x+2*y
# > a<-1:3
# > b<-10                     # 입력변수 중에 첫번째 인수가 벡터이므로 결과도 벡터로 출력. 벡터화 연산 수행.

# > f(a,b)
# [1] 21 22 23

##########################################################################################################################################

f<-function(x,y)x+2*y
f(1:3,5)

# 위의 예제에서 함수 f는 다음과 같은 연산을 수행.

# 1+2*5 = 11
# 2+2*5 = 12
# 3+2*5 = 13

############################################################결과값(print)#################################################################

# > f<-function(x,y)x+2*y
# > f(1:3,5)
# [1] 11 12 13

##########################################################################################################################################

f<- function(x,y) x-y
x<-1:3
y<-4:5
f(x,y)

# 스칼라(Scalar) 2개를 입력받는 함수를 생각.
# 입력 인수 2개가 벡터라면 모든 조합에 대해 계산할까 아니면 쌍으로(pair-wise)로 계산할 것인가?
# 답은 쌍(pair-wise)로 계산한다.
# 쌍이 부족하면 재활용의 원칙이 적용


############################################################결과값(print)#################################################################

# > f<- function(x,y) x-y
# > x<-1:3
# > y<-4:5
# > f(x,y)
# [1] -3 -3 -1

# Warning message:
#  In x - y : longer object length is not a multiple of shorter object length

##########################################################################################################################################

x
x<-2
a*x

# 벡터의 길이가 다를 경우 벡터의 재활용 원칙이 적용되므로 벡터와 스칼라(길이가 1인 벡터)간 연산도 가능.

############################################################결과값(print)#################################################################

# > a*x
# [1] 2 4 6

##########################################################################################################################################
